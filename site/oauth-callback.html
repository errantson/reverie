<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Updated: 2025-10-25 CSP fix for plc.directory -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://*.bsky.network https://*.host.bsky.network https://bsky.social https://*.bsky.social https://plc.directory;">
    <title>Completing Login - Reverie House</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background-color: color-mix(in srgb, var(--reverie-core-color, #734ba1) 12%, white);
        }
        
        .callback-container {
            text-align: center;
            max-width: 400px;
            background: rgba(250, 247, 252, 0.05);
            padding: 48px 32px;
            border: 2px solid var(--core-color, #87408d);
            border-radius: 0;
        }
        
        .logo {
            width: 96px;
            height: 96px;
            margin: 0 auto 24px;
            opacity: 0.95;
            filter: drop-shadow(0 4px 12px rgba(135, 64, 141, 0.3));
            object-fit: contain;
        }
        
        .message {
            font-size: 1.2rem;
            margin-bottom: 24px;
            font-weight: 500;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(135, 64, 141, 0.2);
            border-top-color: var(--core-color, #87408d);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error {
            color: #ff6b6b;
            margin-top: 20px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .status {
            color: #999;
            margin-top: 12px;
            font-size: 0.9rem;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="callback-container">
        <img src="reverie.house/assets/icon.png" alt="Reverie House" class="logo" onerror="this.style.display='none'">
        <div class="message">Completing login...</div>
        <div class="spinner"></div>
        <div class="status" id="status"></div>
        <div class="error" id="error"></div>
    </div>
    
    <script type="module" src="/js/widgets/oauth-callback.js"></script>
</body>
</html>
